(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6834ed5b"],{"17d6":function(t,e,n){"use strict";var i=n("738b"),a=n.n(i);a.a},"57fc":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{total:t.total,layout:t.layout,background:t.background,"current-page":t.currentPage,"page-size":t.pageSize},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1)},a=[],s=(n("c5f6"),{props:{total:{type:Number,default:0},layout:{type:String,default:"total, prev, pager, next"},page:{type:Number,default:1},size:{type:Number,default:10},background:{type:Boolean,default:!0}},data:function(){return{pageSize:this.size||10}},computed:{currentPage:{set:function(t){this.$emit("update:page",t)},get:function(){return this.page}}},methods:{handleCurrentChange:function(){this.$emit("change",this.currentPage)}}}),c=s,o=(n("fc54"),n("2877")),r=Object(o["a"])(c,i,a,!1,null,"e82d743e",null);e["a"]=r.exports},"738b":function(t,e,n){},8162:function(t,e,n){},"92fb":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notice m-center"},[n("ul",{staticClass:"notice-nav"},t._l(t.navList,function(e,i){return n("li",{key:e.code,staticClass:"nav-item",class:{active:t.currentNavIndex==i},on:{click:function(n){return t.handleNavClick(e,i)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])}),0),n("div",{staticClass:"notice-list"},[n("div",{staticClass:"list-setting"},[n("span",{staticClass:"tips"},[t._v("消息中心只展示最近三个月的消息")]),n("span",{staticClass:"setting-box"},[t.noticeList.length>0?n("span",{staticClass:"read-all",on:{click:t.handleAllReadClick}},[t._v("全部标记为已读")]):t._e(),n("span",{staticClass:"read-setting",on:{click:t.handleSettingClick}},[t._v("通知设置")])])]),t.noticeList.length?n("ul",t._l(t.noticeList,function(e,i){return n("li",{key:i,ref:"NoticeList",refInFor:!0,staticClass:"list-item",class:{ready:e.isRead}},[n("div",{staticClass:"item-icon"},[t._v("\n          "+t._s(1==e.code?"实战":"系统")+"\n        ")]),n("div",{staticClass:"item-content"},[n("p",{staticClass:"title",on:{click:function(n){return t.handleNoticeClick(e)}}},[t._v("\n            "+t._s(e.title)+"\n          ")]),n("p",{staticClass:"time"},[t._v("\n            "+t._s(e.time)+"\n          ")]),n("span",{staticClass:"iconfont delete",on:{click:function(n){return n.stopPropagation(),t.handleDeleteClick(e)}}},[t._v("")])])])}),0):n("empty",{attrs:{message:"暂无相关消息数据"}})],1),t.noticeList.length?n("pagination",{attrs:{total:t.total,page:t.page},on:{"update:page":function(e){t.page=e},change:t.handlePaginationChange}}):t._e(),n("notice-setting",{attrs:{list:t.settingList,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}})],1)},a=[],s=n("57fc"),c=n("b800"),o=n("da71"),r=n("0bb4"),l={data:function(){return{total:0,page:1,dialogVisible:!1,settingList:[],noticeList:[],currentNavIndex:0,navList:[]}},created:function(){this.navList=[{title:"全部",code:0},{title:"实战",code:1},{title:"系统",code:2}]},mounted:function(){this.getNoticeListData()},methods:{handleNavClick:function(t,e){this.page=1,this.currentNavIndex=e,this.getNoticeListData()},handleDeleteClick:function(t){var e=this,n={id:t.id};Object(r["d"])(n).then(function(t){var n=t.code,i=t.msg;if(n!==o["a"])return e.$message.error(i),!1;e.$message.success("删除成功"),e.getNoticeListData()}).catch(function(){e.$message.error("删除失败")})},handleNoticeClick:function(t){var e=this,n={id:t.id};Object(r["f"])(n).then(function(t){var n=t.code,i=t.msg;if(n!==o["a"])return e.$message.error(i),!1;e.$message.success("消息已读成功"),e.getNoticeListData()}).catch(function(){e.$message.error("消息已读失败")})},handleAllReadClick:function(){var t=this,e=this.noticeList.filter(function(t){return!t.isRead}).map(function(t){return t.id}),n={ids:e};Object(r["e"])(n).then(function(e){var n=e.code,i=e.msg;if(n!==o["a"])return t.$message.error(i),!1;t.$message.success("全部标记成功"),t.getNoticeListData()}).catch(function(){t.$message.error("全部标记失败")})},handleSettingClick:function(){this.dialogVisible=!0,this.getNoticeSettingData()},handlePaginationChange:function(t){this.page=t,this.getNoticeListData()},getNoticeListData:function(){var t=this,e={page:this.page,code:this.currentCode};Object(r["b"])(e).then(function(e){t.noticeList=[],t.total=0;var n=e.code,i=e.data,a=e.msg;n===o["a"]?(t.noticeList=i.list,t.total=i.total):(t.$message.error(a),t.noticeList=[],t.total=0)}).catch(function(){t.noticeList=[],t.total=0})},getNoticeSettingData:function(){var t=this;Object(r["c"])().then(function(e){t.settingList=[];var n=e.code,i=e.data;n===o["a"]&&(t.settingList=i)}).catch(function(){t.settingList=[]})}},computed:{currentCode:function(){return this.navList[this.currentNavIndex].code||""}},components:{Pagination:s["a"],Empty:c["a"],NoticeSetting:function(){return n.e("chunk-26133f91").then(n.bind(null,"5655"))}},beforeDestroy:function(){clearTimeout(this.timer)}},u=l,g=(n("17d6"),n("2877")),d=Object(g["a"])(u,i,a,!1,null,"1f9e13e3",null);e["default"]=d.exports},b800:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty-container"},[i("img",{staticClass:"empty-img",attrs:{src:n("e8b2"),alt:""}}),i("p",{staticClass:"empty-msg"},[t._v("\n    "+t._s(t.message)+"\n  ")])])},a=[],s={props:{message:{type:String,default:"暂无相关数据"}}},c=s,o=(n("ff14"),n("2877")),r=Object(o["a"])(c,i,a,!1,null,"68b4e838",null);e["a"]=r.exports},e8b2:function(t,e,n){t.exports=n.p+"img/empty.328a0b79.jpg"},f6cc:function(t,e,n){},fc54:function(t,e,n){"use strict";var i=n("f6cc"),a=n.n(i);a.a},ff14:function(t,e,n){"use strict";var i=n("8162"),a=n.n(i);a.a}}]);