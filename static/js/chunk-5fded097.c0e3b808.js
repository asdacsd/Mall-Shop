(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fded097"],{"57fc":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{total:t.total,layout:t.layout,background:t.background,"current-page":t.currentPage,"page-size":t.pageSize},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1)},s=[],n=(i("c5f6"),{props:{total:{type:Number,default:0},layout:{type:String,default:"total, prev, pager, next"},page:{type:Number,default:1},size:{type:Number,default:10},background:{type:Boolean,default:!0}},data:function(){return{pageSize:this.size||10}},computed:{currentPage:{set:function(t){this.$emit("update:page",t)},get:function(){return this.page}}},methods:{handleCurrentChange:function(){this.$emit("change",this.currentPage)}}}),l=n,o=(i("fc54"),i("2877")),c=Object(o["a"])(l,a,s,!1,null,"e82d743e",null);e["a"]=c.exports},"667c":function(t,e,i){"use strict";var a=i("ae9f"),s=i.n(a);s.a},8162:function(t,e,i){},"961d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"question"},[i("div",{staticClass:"question-header m-center"},[t._m(0),t.userInfo.id?i("div",{staticClass:"question-nav"},[i("dl",[i("dt",[t._v("我的关注：")]),t._l(t.followList,function(e,a){return i("dd",{key:a,class:{active:t.currentIndex==a},on:{click:function(i){return t.handleLikeClick(e,a)}}},[t._v("\n          "+t._s(e.title)+"\n        ")])}),i("dd",{on:{click:t.handleLabelManageClick}},[t._v("标签管理")])],2)]):t._e()]),i("div",{staticClass:"m-center"},[i("div",{staticClass:"question-content-container"},[i("div",{staticClass:"question-list"},[t.questionList&&t.questionList.length?i("ul",t._l(t.questionList,function(e,a){return i("li",{key:a,staticClass:"question-item"},[i("div",{staticClass:"finish"},[e.isResolve?i("span",{staticClass:"iconfont"},[t._v("")]):t._e(),i("span",[t._v(t._s(e.answers))])]),i("div",{staticClass:"content-box"},[i("h3",{staticClass:"title"},[t._v("\n                "+t._s(e.title)+"\n              ")]),i("p",{staticClass:"tag"},[i("img",{attrs:{src:e.icon,alt:""}}),t._l(e.tags,function(e,a){return i("span",{key:a,staticClass:"name"},[t._v(t._s(e))])}),i("span",{staticClass:"view-box"},[i("i",{staticClass:"iconfont"},[t._v("")]),i("span",{staticClass:"view-number"},[t._v(t._s(e.views))])])],2)])])}),0):i("empty",{attrs:{message:"暂无相关猿问数据"}})],1)]),i("pagination",{attrs:{size:t.size,total:t.total,page:t.page},on:{"update:page":function(e){t.page=e},change:t.handlePaginationChange}})],1),i("mooc-dialog",{attrs:{title:"选择感兴趣的标签",visible:t.dialogVisible,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-scrollbar",[i("div",{staticClass:"label-container"},t._l(t.labelList,function(e,a){return i("dl",{key:a,staticClass:"label-group"},[i("dt",{staticClass:"label-group-title"},[t._v(t._s(e.title))]),t._l(e.list,function(e,s){return i("dd",{key:s,staticClass:"label-item",class:{"is-active":e.isSelected},on:{click:function(i){return t.handleLabelClick(a,e,s)}}},[t._v("\n            "+t._s(e.title)+"\n          ")])})],2)}),0)]),i("template",{slot:"footer"},[i("mooc-button",{attrs:{type:"success",disabled:t.isLoading},on:{click:t.handleFollowClick}},[t._v("完成")])],1)],2)],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"question-search"},[i("img",{attrs:{src:"https://www.imooc.com/static/img/wenda/wenda-logo.png",alt:""}}),i("div",{staticClass:"search-box"},[i("input",{attrs:{type:"text",placeholder:"请输入你的问题"}}),i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"search-btn"},[t._v("\n        提问\n      ")])])}],n=i("cebc"),l=(i("20d6"),i("ac6a"),i("57fc")),o=i("b800"),c=i("a27e");function r(t){return c["a"].get("/api/v1/question/",{params:t})}function u(){return c["a"].get("/api/v1/label/follow/list")}function f(t){return c["a"].post("/api/v1/label/follow",t)}function d(){return c["a"].get("/api/v1/label")}var g=i("da71"),h=i("2f62"),p={data:function(){return{size:20,isLoading:!1,dialogVisible:!1,currentIndex:0,followList:[],questionList:[],total:0,page:1,labelList:[],selectLabelList:[]}},mounted:function(){this.userInfo.id&&this.getFollowListData(!0),this.getQuestionListData()},methods:{handleLikeClick:function(t,e){this.currentIndex=e,this.getQuestionListData()},handleLabelManageClick:function(){this.dialogVisible=!0,this.getLabelListData()},handleLabelClick:function(t,e,i){e.isSelected=!e.isSelected,this.$set(this.labelList[t]["list"],i,e)},handleFollowClick:function(){var t=this,e=[];if(this.labelList.forEach(function(t){var i=t.list;i.forEach(function(t){t.isSelected&&e.push(t)})}),0===e.length)return this.$message.warning("至少选择一个要关注的标签"),!1;this.isLoading=!0;var i={list:e};f(i).then(function(e){t.isLoading=!1;var i=e.code,a=e.msg;i===g["a"]?(t.$message.success(a),t.dialogVisible=!1,t.getFollowListData()):t.$message.error(a)}).catch(function(){t.isLoading=!1,t.$message.error("接口异常")})},handlePaginationChange:function(t){this.page=t,this.getQuestionListData()},getFollowListData:function(t){var e=this;this.followList=[],u().then(function(i){var a=i.code,s=i.data,n=i.msg;a===g["a"]?0===s.length&&t?e.handleLabelManageClick():(s.unshift({title:"全部"}),e.followList=s):e.$message.error(n)}).catch(function(){e.$message.error("接口异常")})},getQuestionListData:function(){var t=this,e={page:this.page,size:this.size,label:"全部"===this.currentLabel?"":this.currentLabel};this.questionList=[],r(e).then(function(e){var i=e.code,a=e.data,s=e.msg;i===g["a"]?(t.questionList=a.list,t.total=a.total):(t.total=0,t.$message.error(s))}).catch(function(){t.total=0,t.$message.error("接口异常")})},getLabelListData:function(){var t=this;this.labelList=[],d().then(function(e){var i=e.code,a=e.data,s=e.msg;i===g["a"]?(console.log(a),console.log("xxxxx"),t.labelList=t.normalizeLabelList(a)):t.$message.error(s)}).catch(function(){t.$message.error("接口异常")})},normalizeLabelList:function(t){var e=this;if(0===t.length)return[];var i=[];return t.forEach(function(t){console.log(t);var a=i.findIndex(function(e){return e.title===t.type.text});console.log(e.followList),console.log("this.foloow");var s=e.followList.findIndex(function(e){return e.labelid===t.id});t.isSelected=-1!==s,-1===a?i.push({title:t.type.text,list:[t]}):i[a].list.push(t)}),i}},computed:Object(n["a"])({currentLabel:function(){return 0===this.followList.length?"":this.followList[this.currentIndex].title}},Object(h["c"])(["userInfo"])),components:{Pagination:l["a"],Empty:o["a"]}},v=p,b=(i("667c"),i("2877")),m=Object(b["a"])(v,a,s,!1,null,"2450135d",null);e["default"]=m.exports},ae9f:function(t,e,i){},b800:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"empty-container"},[a("img",{staticClass:"empty-img",attrs:{src:i("e8b2"),alt:""}}),a("p",{staticClass:"empty-msg"},[t._v("\n    "+t._s(t.message)+"\n  ")])])},s=[],n={props:{message:{type:String,default:"暂无相关数据"}}},l=n,o=(i("ff14"),i("2877")),c=Object(o["a"])(l,a,s,!1,null,"68b4e838",null);e["a"]=c.exports},e8b2:function(t,e,i){t.exports=i.p+"img/empty.328a0b79.jpg"},f6cc:function(t,e,i){},fc54:function(t,e,i){"use strict";var a=i("f6cc"),s=i.n(a);s.a},ff14:function(t,e,i){"use strict";var a=i("8162"),s=i.n(a);s.a}}]);